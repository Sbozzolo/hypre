#!/bin/sh
# Copyright (c) 1998 Lawrence Livermore National Security, LLC and other
# HYPRE Project Developers. See the top-level COPYRIGHT file for details.
#
# SPDX-License-Identifier: (Apache-2.0 OR MIT)

# generate header file for transforming multiprecision function names

#===========================================================================
# Create external header file
#===========================================================================

MUP_HEADER=HYPRE_krylov_mup.h

cat > $MUP_HEADER <<@

/*** DO NOT EDIT THIS FILE DIRECTLY (use $0 to generate) ***/

#ifndef HYPRE_KRYLOV_MUP_HEADER
#define HYPRE_KRYLOV_MUP_HEADER

#ifdef __cplusplus
extern "C" {
#endif

#if defined (HYPRE_MIXED_PRECISION)
@

cat mup_pre_ext.h        >> $MUP_HEADER
cat mup_functions_ext.h  >> $MUP_HEADER

cat >> $MUP_HEADER <<@

#endif

#ifdef __cplusplus
}
#endif

#endif

@

#===========================================================================
# Create internal header file
#===========================================================================

MUP_HEADER=_hypre_krylov_mup.h

cat > $MUP_HEADER <<@

/*** DO NOT EDIT THIS FILE DIRECTLY (use $0 to generate) ***/

#ifndef hypre_KRYLOV_MUP_HEADER
#define hypre_KRYLOV_MUP_HEADER

#ifdef __cplusplus
extern "C" {
#endif

#if defined (HYPRE_MIXED_PRECISION)
@

cat mup_pre_int.h        >> $MUP_HEADER
cat mup_functions_int.h  >> $MUP_HEADER

cat >> $MUP_HEADER <<@

#endif

#ifdef __cplusplus
}
#endif

#endif

@

#===========================================================================
# Create external header file **FOR LOBPCG**
#===========================================================================

MUP_HEADER=HYPRE_lobpcg_mup.h

cat > $MUP_HEADER <<@

/*** DO NOT EDIT THIS FILE DIRECTLY (use $0 to generate) ***/

#ifndef HYPRE_LOBPCG_MUP_HEADER
#define HYPRE_LOBPCG_MUP_HEADER

#ifdef __cplusplus
extern "C" {
#endif

#if defined (HYPRE_MIXED_PRECISION)
@

cat mup_pre_lobpcg_ext.h        >> $MUP_HEADER
cat mup_functions_lobpcg_ext.h  >> $MUP_HEADER

cat >> $MUP_HEADER <<@

#endif

#ifdef __cplusplus
}
#endif

#endif

@

#===========================================================================
# Create internal header file **FOR LOBPCG**
#===========================================================================

MUP_HEADER=_hypre_lobpcg_mup.h

cat > $MUP_HEADER <<@

/*** DO NOT EDIT THIS FILE DIRECTLY (use $0 to generate) ***/

#ifndef hypre_LOBPCG_MUP_HEADER
#define hypre_LOBPCG_MUP_HEADER

#ifdef __cplusplus
extern "C" {
#endif

#if defined (HYPRE_MIXED_PRECISION)
@

cat mup_pre_lobpcg_int.h        >> $MUP_HEADER
cat mup_functions_lobpcg_int.h  >> $MUP_HEADER

cat >> $MUP_HEADER <<@

#endif

#ifdef __cplusplus
}
#endif

#endif

@

#===========================================================================
# Create def header file
#===========================================================================

MUP_HEADER=_hypre_krylov_mup_def.h

cat > $MUP_HEADER <<@

/*** DO NOT EDIT THIS FILE DIRECTLY (use $0 to generate) ***/

@

# Generate copyright header
../config/write_header.sh >> $MUP_HEADER

cat >> $MUP_HEADER <<@
/* Header file for transforming multiprecision functions names */

#ifndef hypre_KRYLOV_MUP_DEF_HEADER
#define hypre_KRYLOV_MUP_DEF_HEADER

#include "multiprecision.h"

@

cat>> $MUP_HEADER <<@
$(
cat mup.functions mup.methods | while read -r func_name
do
   echo "#define $func_name HYPRE_ZZZZZPRECISION_FUNC ( $func_name )"
done
cat mup.fixed | while read -r func_name
do
   echo "#define $func_name HYPRE_FIXEDPRECISION_FUNC ( $func_name )"
done
)

#endif
@

#===========================================================================
# Create undef header file
#===========================================================================

MUP_HEADER=_hypre_krylov_mup_undef.h

cat > $MUP_HEADER <<@

/*** DO NOT EDIT THIS FILE DIRECTLY (use $0 to generate) ***/

@

# Generate copyright header
../config/write_header.sh >> $MUP_HEADER

cat >> $MUP_HEADER <<@
/* Header file for transforming multiprecision functions names */

#undef hypre_KRYLOV_MUP_DEF_HEADER

#include "multiprecision.h"

@

cat>> $MUP_HEADER <<@
$(
cat mup.functions mup.methods mup.fixed | while read -r func_name
do
   echo "#undef $func_name"
done
)
@
